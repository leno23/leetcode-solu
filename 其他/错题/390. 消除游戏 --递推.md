#### [390. 消除游戏](https://leetcode.cn/problems/elimination-game/)

难度中等305

列表 `arr` 由在范围 `[1, n]` 中的所有整数组成，并按严格递增排序。请你对 `arr` 应用下述算法：

-   从左到右，删除第一个数字，然后每隔一个数字删除一个，直到到达列表末尾。
-   重复上面的步骤，但这次是从右到左。也就是，删除最右侧的数字，然后剩下的数字每隔一个删除一个。
-   不断重复这两步，从左到右和从右到左交替进行，直到只剩下一个数字。

给你整数 `n` ，返回 `arr` 最后剩下的数字。

 

**示例 1：**

```
输入： n = 9
输出： 6
解释：
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
arr = [2, 4, 6, 8]
arr = [2, 6]
arr = [6]
```

```py
class Solution:
    def lastRemaining(self, n: int) -> int:
        # 剩余数字的个数
        remain=n
        # 是否从左到右删
        flag = 1
        # 序列的第一个数字
        res=1
        # 序列的公差
        step=1
        '''
        1 2 3 4 5 6 7 8 9 10 11
          2   4   6   8   10
              4       8
                      8

        '''
        while remain > 1:
            # 只有从左往右删，或者有偶数个数 而且 从右往左删时，才会把第一个数字删掉
            if flag or remain & 1:
                # 公差为step，第一个数删除之后，第二个数成为第一个数，更新res
                res += step
            # 调换操作的方向
            flag ^= 1
            # 每次操作公差翻倍
            step *= 2
            # 每次操作剩余数字减半
            remain //= 2
        return res